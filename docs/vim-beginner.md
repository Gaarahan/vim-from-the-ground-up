# Vim 真的不适合你吗？ 一个面向初学者的指南

> 原文链接：[https://thevaluable.dev/vim-beginner/](https://thevaluable.dev/vim-beginner/)

![why Vim haters hate Vim?](https://thevaluable.dev/images/2019/vim-beginner/vim-hate.webp)

欢迎阅读本 Vim 学习系列文章的第一部分！

<!-- TODO 通用菜单 -->

“Vim 不适合我！”，我的开发同事，Dave，如此喊道。

这不是我第一次听到这句话了。结果呢？我跟 Dave 还有围坐在我桌边的其他人，解释起了学习 Vim 基础能为我们带来的好处：

- 许多 [CLI](https://en.wikipedia.org/wiki/Command-line_interface) 都使用 Vim 风格的键位绑定，例如 [Less](https://en.wikipedia.org/wiki/Less_%28Unix%29)。
- 我们可以轻松的在远程系统或者 docker 容器中编辑文件，因为这些时候我们只能使用 Vi（Vim 的祖先）或者 Vim。
- 我们可以肆意的定制 Vim，以此来适配我们的个性需求以及偏好。
- 我们可以在任何我们愿意的地方使用 Vim。
- Vim 可以用于编辑大文件而不会卡顿，例如庞大的日志文件。
- 我们可以学习一种新奇且**非常有趣**的方式来创建和编辑文本。

对于我来说，Vim 是游戏化的编程。

现在，仍有一些开发在不曾尝试去了解 Vim 的同时，却对其存在强烈的偏见。未曾尝试过，又怎能拥有发言权呢？

而我也不能去责备他们：我在多年前也有[同样的偏见](https://thevaluable.dev/phpstorm-vs-vim/)。但当我尝试去学习着使用 Vim，当我努力去理解它是如何工作（不仅仅是随便的学了两个快捷键）时，我爱上了它。

这就是我今天为什么想要跟你分享我是如何学到 Vim 的基础元素的。或者更具体的来说，我们将在本文中读到：

- 如何快速的学到好的打字习惯。这是你释放 Vim 潜在能量时必不可少的。即使你不使用 Vim，这些习惯对于任何开发也都是有益处的。
- 不同的 Vim 模式。这就是 Vim 为何如此疯狂的主要原因。
- 基础的 Vim 快捷键，以使得你能够尽可能的高效，并且附赠一些帮助你记住它们的小技巧。
- 如何“讲 Vim 语”。<!-- TODO -->
- Vim 的选项都有哪些，以及如何去操作它们。

在这之后，你就能够带着经验和自信的来谈论 Vim，即使你还是想说：“Vim 不适合我！”。

这篇文章的目标**并不是**要马上使用 Vim 去替代你的 IDE，我更推荐一步一步的来达到这个目的。

开始时，你可以尝试使用 Vim 来编辑一些配置文件，或者其他的文本文件。练习在本文中所学，将是你了解 Vim，以及了解为何在它被创造出来数十年后仍旧如此流行的钥匙。

不要觉得 Vim 学起来很难，通过 Vim 编辑任何文件都是很容易的，只是要成为大师很难而已。真正的 Vim 大师，即便在喜马拉雅山巅编码了数百年之久，也不敢说自己对 Vim 了如指掌。这一点是很棒的，因为这意味着 Vim 拥有着无限的可能性。

不相信吗？跟着我，让我们一起来探索 Vim 的美妙世界吧。

## 预备知识：力量就在你的指尖

当我决定去学习 Vim 时，我想要把它做好。Vim 可以让你忘记你的双手，并且能专注于更加重要的事情：你所写下的内容。

### 鼠标：你误交的好朋友

Vim 的一个优点便是可以让你的手一直放在键盘上，而不需要经常去抓住你的鼠标。

我可以预料到你的担忧：鼠标就像你的另一只手！非常的实用并且易用！为什么不用它呢？

鼠标有点像是一个医学植入设备，医生在你很小的时候，就把它放入你的身体，并且告诉你的父母：这是你在操作电脑时最好的设备。你之所以喜欢使用鼠标，是因为你深度使用着它，并且使用了很久。

可以问问自己：如果鼠标这么完美，那为什么，你最爱的 IDE 会有着 **341324 个不同的快捷键**？可能是因为使用键盘更快？更容易？更有效率？更**舒服**？

鼠标并不是你最好的朋友，它只是一个普通朋友。键盘才是你的好兄弟！真正的力量都是来自于键盘的，而 Vim 就是你释放与驾驭该力量的完美选择。

> Note:
> 如果你想要构建一个完整的不借助鼠标的开发环境，[你可能会对这本书感兴趣](https://themouseless.dev/)

这便是我为什么坚信在学习 Vim 之前，你还应该学你基础的打字技巧。这会给你带来很大的帮助：

- 你可以更加准确和快速的打字。
- 随着时间的增长，你的准确性与速度还可以持续提高。
- 你将完全不必再去关注你的键盘。

如果你已经在使用这些技巧了，那就太棒了，你可以直接跳去下一章节了。

### 高效的输入：两大准则

我们都知道，对于开发者来说：思考，比知道如何打字更加重要。这便是说，最舒适的状态便是能够让我们的工具如臂指使（这样便不会总是关注工具了）。而作为一个开发来说，键盘便是我们最重要的工具之一。

当我们能看到自己的打字在一天又一天的提高时，这是非常令人满意的。虽然打字基础很容易就能快速掌握，但它的进步空间是非常巨大的。

第一个你应当学习的规则便是如何正确的放置你的双手：

![illustration of a keyboard with home row keys](https://thevaluable.dev/images/2019/vim-beginner/home_row_keys.png)
[图源](http://www.atypingtest.com/)

`a`、`s`、`d`、`f`、与`j`、`k`、`l`、`;`这几个键被称为基本键位。它们是你打字时双手的起点，手指放置于此，你便能够容易的触及其他按钮。

你可能会注意到 `f` 与 `j` 按钮上的小凸起：这是能让你知道你的食指应该放在哪的标记。放好食指后，你的其他其他手指便可以很容易的放到其他的基本键上。

你要训练的第二条规则是：打字的时候不要看键盘。当你不记得键位在哪里时，也尽量不要去看键盘，试着猜一猜也好。

我好多年来都在用两个手指打字，最初实践这些准则时感觉非常不适应。但现在，我再不是两指打字了，而且正确的打字方式也舒服了很多。

熟悉新的打字方式只用掉了我一到两周的时间，这当然不是因为我是天才，只是因为它很简单。

#### 第一周

当你决定使用我上面描述的两个准则时，你需要在**任何时间**都遵循这些规则，这将需要你 100% 的投入。当你突然发现你又用起了旧的错误习惯时，耐心点，不要把这当做是失败，只要继续调整为正确的习惯即可。这是学习过程中很常见的。

前三天将是最困难的，你总是会在不经意间又切换到坏习惯上去，打字也经常会出错，速度也会慢下来。

幸运的是，第一周结束后，出错的频率会减少，而你也会慢慢的不再去看你的键盘。

#### 第二周

第二周时，你将注意到自己的出错减少了更多，并且你不再需要去用眼睛看键位了。

而这周结束后，你会发现你的打字速度已经提升上来了，你将被满满的成就感所包围。

#### 速度与准度

在你最初的这两周训练时，你不应该关注速度与准度。只是尽自己努力去打字就好，不要担心其他任何事情。

训练完成之后，你就可以开始关注速度与准度了：尽量去快速而又准确的输入。

为了能训练这些输入技巧，你可以使用一些非常有帮助的打字练习软件。

这些是我喜欢的：

- [Type Racer](https://play.typeracer.com/)
- [Online Typing Test WPM](https://www.keyhero.com/)
- [Speed Coder](http://www.speedcoder.net/)

## Vim 还是 Neovim？

![Vim or Neovim? Neovim!](https://thevaluable.dev/images/2019/vim-beginner/vim-neovim.webp)

有了基础知识之后，让我们来安装 Neovim。

“Neovim？这是什么鬼东西？”你可能想要这样问。

Neovim 是[重构版的 Vim](https://neovim.io/charter/)。它与 Vim 是完全兼容的，我强烈推荐你使用它，而不是使用常规的 Vim，因为 Neovim 是被优化的开箱即用的。

这是这两个软件的官方链接：

- [Neovim](https://neovim.io/)
- [Vim](https://www.vim.org/)

因为 Neovim 与 Vim 是**几乎完全相同**的（基础原理不同），我将继续使用通用的名词**Vim**来称呼它们。

## Vim 配置

在 Vim 中，几乎所有东西都是可配置的。这是非常疯狂的，你可以根据你的特殊要求，甚至根据你任何的疯狂的想法来定制你的编辑器。

你的配置文件应该默认会在下面的路径，取决于你使用的是 Vim 还是 Neovim：

- Vim：`~/.vimrc`
- Neovim：`~/.config/nvim/init.vim` 或 `~/nvim/init.vim`（取决于你的环境变量`@XDG_CONFIG_HOME`的值）。

我将使用**vimrc** 来指代该配置文件。

让我们用你最喜欢的编辑器（不久后我们将把它替换为 Vim！）打开你的 vimrc，然后为它添加一些基础配置。我等下会解释它们的含义：

```vim
noremap <Up> <Nop>
noremap <Down> <Nop>
noremap <Left> <Nop>
noremap <Right> <Nop>
```

以及

```vim
set clipboard+=unnamedplus
```

vimrc 的内容以及一些 Vim 插件都是用 Vimscript 写的，这是专门为编辑器创造的一个特殊的编程语言。我并不会推荐你当下就去学习这门语言，只要有一点基础，能够配置 Vim 就够了。Vimscript 用起来 非常痛苦，因此 Neovim 想要使用 Lua 来替代它，这确实是一个好主意。

现在，让我们打开 Vim，学习一些你最开始时需要的基础知识。

## Vim 模式

![Vim's normal mode will give you the power](https://thevaluable.dev/images/2019/vim-beginner/normal-mode-power.webp)

启动 Vim 之后，你将看到一个欢迎界面，展示着你能使用的一些基础命令。当你输入时，这个界面就会消失。

Vim 跟你的常规编辑器不一样，通常你只需要简单的敲击键盘，你输入的内容就会出现在你的屏幕上，但 Vim 不是这样的，尝试按下`x` 键，看起来就好像什么都没有发生。

这是因为 Vim 存在**模式**的概念，在不同的模式中，你可以做不同的事情。为了能够容易的辨别出讨论的不同模式，我在后面的正文中都会使用大写来区分（例如：NORMAL 模式）。

### Normal 模式

通常的，当你打开一个编辑器时，你可以直接去输入内容。但在 Vim 中不是这样的，默认的模式是 NORMAL 模式，这时候你可以**编辑**一些已有的内容。

你可以使用快捷键来移动到你想要编辑的地方，去进行插入，修改或删除的操作。而且一次鼠标都不需要使用！

可以将该模式认为是一套能让你定位到编辑位置的快捷键组成的系统。而 Vim 与你的 GUI 编辑器的快捷键有着重要的区别：Vim 中的快捷键大多数情况下都是存在语意的。它们有着特定的逻辑并且是**可组合的**，因此学习 Vim 是很简单的。

例如： 你最喜欢的 GUI 编辑器中，查找文件的快捷键`CTRL+shift+n`是很难记忆的，因为很难去将你的所想（打开一个文件）与所学（具体的快捷键）联系起来。

后面我们还会再来介绍 NORMAL 模式，到时候我们会学习 Vim 一些主要的快捷键。

### Insert 模式

注意看一下你在 Vim 中的光标，通常情况下会是一个方块。现在，让我们敲下我们 NORMAL 模式下的第一个命令：`i`，即`i`nsert。

这是什么黑魔法吗？你的光标变成了一条竖线！而且在 Vim 的左下角出现了`--INSERT--` 标识符！多么令人惊讶！多么非凡！你觉得我很浮夸？是的，我就是很浮夸！

欢迎来到 INSERT 模式。

在该模式下，你终于可以开始输入内容了：放开输入你想要的任何内容吧。要想停止输入并回到 NORMAL 模式的话，简单的按下`ESC` 或者`CTRL-c` 即可。光标会重新变回方块，并且标识符`--INSERT--`也会消失。别担心，它还会回来的。

这便是你使用 Vim 的工作方式: 使用 NORMAL 模式来编辑**已有的**内容，使用 INSERT 模式来插入**新的**内容。

### Visual 模式

Vim 里第三个你将会经常使用的重要模式：VISUAL 模式。它的作用是**选中你的内容**，然后你便可以修改、编辑或者复制你的选中了。

要进入 VISUAL 模式，你可能已经猜到了，你需要在 NORMAL 模式下按下`v`。你将看到标识符`--VISUAL--`出现在你的 Vim 应用左下角。同样的，按下`ESC` 或者`CTRL-c`就可以回到默认的模式：NORMAL 模式。

你也可以使用`SHIFT+v` 来进入 VISUAL 模式的行选择。这还不算结束：
